<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover,user-scalable=no" />
  <meta name="theme-color" content="#3182ce" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="壽司助手" />
  <title>壽司助手 - 出餐管理系統</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="nav-bar">
    <div class="nav-container">
      <a href="#" class="nav-link" data-page="checklist">
        <span>流程</span>
      </a>
      <a href="#" class="nav-link" data-page="roll2">
        <span>卷2</span>
      </a>
      <a href="#" class="nav-link active" data-page="roll1">
        <span>卷1</span>
      </a>
      <a href="#" class="nav-link" data-page="notes">
        <span>筆記</span>
      </a>
    </div>
  </nav>

  <!-- Page: Roll 1 -->
  <div id="page-roll1" class="page-content active">
    <header style="text-align: center;">
      <h1>卷1 出餐紀錄</h1>
    </header>

    <div class="wrap">
      <div class="card">
        <div class="toolbar">
          <div class="pill">
            總剩餘：<strong class="count" id="roll1-total-remaining">0</strong> 份
            <span class="badge" id="roll1-done-badge" style="display:none;">完成 ✓</span>
          </div>
          <button class="btn" id="roll1-reset-btn" title="恢復每日目標">重設</button>
        </div>

        <div class="table-wrap">
          <!-- Mobile Card View -->
          <div class="mobile-items" id="roll1-mobile-items"></div>

          <!-- Desktop Table View -->
          <table id="roll1-list">
            <thead>
              <tr>
                <th style="width:25%;">產品</th>
                <th style="width:12%;">目標</th>
                <th style="width:12%;text-align: right;">剩餘</th>
                <th style="width:20%;">操作</th>
              </tr>
            </thead>
            <tbody id="roll1-tbody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Page: Roll 2 -->
  <div id="page-roll2" class="page-content">
    <header style="text-align: center;">
      <h1>卷2 出餐紀錄</h1>
    </header>

    <div class="wrap">
      <div class="card">
        <div class="toolbar">
          <div class="pill">
            總剩餘：<strong class="count" id="roll2-total-remaining">0</strong> 份
            <span class="badge" id="roll2-done-badge" style="display:none;">完成 ✓</span>
          </div>
          <button class="btn" id="roll2-reset-btn" title="恢復每日目標">重設</button>
        </div>

        <div class="table-wrap">
          <!-- Mobile Card View -->
          <div class="mobile-items" id="roll2-mobile-items"></div>

          <!-- Desktop Table View -->
          <table id="roll2-list">
            <thead>
              <tr>
                <th style="width:25%;">產品</th>
                <th style="width:12%;">每日目標</th>
                <th style="width:12%;text-align: right;">剩餘</th>
                <th style="width:20%;">操作</th>
              </tr>
            </thead>
            <tbody id="roll2-tbody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Page: Notes -->
  <div id="page-notes" class="page-content">
    <header style="text-align: center;">
      <h1>壽司卷筆記</h1>
      <div class="sub">快速查看各款壽司卷的詳細成分</div>
    </header>

    <div class="wrap">
      <div class="card">
        <div class="toolbar">
          <select id="notes-picker" title="選擇壽司卷" aria-label="選擇壽司卷"></select>
          <button class="btn primary" id="notes-view-btn">查看</button>
        </div>

        <div class="content">
          <div id="notes-result" class="empty">請從上方選單選擇一款壽司卷</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Page: Checklist -->
  <div id="page-checklist" class="page-content">
    <header style="text-align: center;">
      <h1>壽司部門幫廚</h1>
      <div class="sub">一日工作流程（可勾選）</div>
    </header>

    <div class="wrap">
      <!-- Progress Summary -->
      <div class="progress-summary">
        <div class="progress-card">
          <div class="progress-label">今日完成</div>
          <div class="progress-value" id="checklist-overall-done">0</div>
          <div style="font-size: 13px; color: var(--muted); margin-top: 4px;">
            共 <span id="checklist-overall-total">0</span> 項
          </div>
        </div>
        <div class="progress-card">
          <div class="progress-label">完成率</div>
          <div class="progress-value" id="checklist-completion-rate">0%</div>
        </div>
      </div>

      <!-- Global Actions -->
      <div class="card">
        <div class="toolbar" style="justify-content: center;">
          <button class="btn" id="checklist-reset-today">今日重設</button>
        </div>
      </div>

      <!-- Timer Card -->
      <div class="card timer-card" id="checklist-timer-card">
        <div class="timer-label">⏱ 便當「兩小時回查」計時器</div>
        <div class="timer-display" id="checklist-bento-remaining">--:--:--</div>
        <div class="timer-status" id="checklist-timer-status">待啟動</div>
        <div class="timer-controls">
          <button class="btn" id="checklist-start-bento">開始計時</button>
          <button class="btn" id="checklist-stop-bento">停止</button>
        </div>
      </div>

      <!-- 準備前 -->
      <section class="card" data-section="prep">
        <div class="toolbar" style="border-bottom: none; padding-bottom: 8px;">
          <div class="section-header" style="width: 100%;">
            <h2 class="section-title">
              <span>🟡</span>
              <span>準備前</span>
            </h2>
            <span class="section-badge" id="checklist-badge-prep">0/0</span>
          </div>
        </div>
        <div class="section-content" style="padding: 0 16px 16px;">
          <div class="section-actions">
            <button class="btn btn-sm" data-check="prep">全選</button>
            <button class="btn btn-sm" data-uncheck="prep">全不選</button>
          </div>
          <div id="checklist-list-prep"></div>
        </div>
      </section>

      <!-- 準備中 -->
      <section class="card" data-section="during">
        <div class="toolbar" style="border-bottom: none; padding-bottom: 8px;">
          <div class="section-header" style="width: 100%;">
            <h2 class="section-title">
              <span>🔵</span>
              <span>準備中</span>
            </h2>
            <span class="section-badge" id="checklist-badge-during">0/0</span>
          </div>
        </div>
        <div class="section-content" style="padding: 0 16px 16px;">
          <div class="section-actions">
            <button class="btn btn-sm" data-check="during">全選</button>
            <button class="btn btn-sm" data-uncheck="during">全不選</button>
          </div>
          <div id="checklist-list-during"></div>
        </div>
      </section>

      <!-- 準備後 -->
      <section class="card" data-section="post">
        <div class="toolbar" style="border-bottom: none; padding-bottom: 8px;">
          <div class="section-header" style="width: 100%;">
            <h2 class="section-title">
              <span>🟢</span>
              <span>準備後</span>
            </h2>
            <span class="section-badge" id="checklist-badge-post">0/0</span>
          </div>
        </div>
        <div class="section-content" style="padding: 0 16px 16px;">
          <div class="section-actions">
            <button class="btn btn-sm" data-check="post">全選</button>
            <button class="btn btn-sm" data-uncheck="post">全不選</button>
          </div>
          <div id="checklist-list-post"></div>
        </div>
      </section>

      <footer class="footer" style="margin-top: 20px; padding: 16px; text-align: center; color: var(--muted); font-size: 13px;">
        資料保存在此裝置的瀏覽器（localStorage）<br>
        每日自動換日重設
      </footer>
    </div>
  </div>

  <script src="sushi_assistant.js"></script>
</body>
</html>
